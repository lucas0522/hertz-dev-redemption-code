{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://hertz-dev-redemption-code/webpack/bootstrap","webpack://hertz-dev-redemption-code/webpack/runtime/compat get default export","webpack://hertz-dev-redemption-code/webpack/runtime/define property getters","webpack://hertz-dev-redemption-code/webpack/runtime/hasOwnProperty shorthand","webpack://hertz-dev-redemption-code/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://hertz-dev-redemption-code/external root \"flarum.core.compat['admin/app']\"","webpack://hertz-dev-redemption-code/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://hertz-dev-redemption-code/external root \"flarum.core.compat['common/components/Button']\"","webpack://hertz-dev-redemption-code/./src/admin/index.js","webpack://hertz-dev-redemption-code/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","import app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Button from 'flarum/common/components/Button';\n\napp.initializers.add('hertz-dev-redemption-code', () => {\n  app.extensionData.for('hertz-dev-redemption-code').registerPage(RedemptionPage);\n});\n\nclass RedemptionPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    \n    this.codes = [];\n    this.loading = false;\n    \n    // 生成用的表单数据\n    this.newGroup = 10; // 默认群组ID，可修改\n    this.newDays = 30;\n    this.newAmount = 1;\n\n    this.refresh();\n  }\n\n  refresh() {\n    this.loading = true;\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/redemption-codes'\n    }).then(response => {\n      this.codes = response.data;\n      this.loading = false;\n      m.redraw();\n    });\n  }\n\n  generate() {\n    this.loading = true;\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/redemption-codes',\n      body: {\n        data: {\n          attributes: {\n            groupId: this.newGroup,\n            days: this.newDays,\n            amount: this.newAmount\n          }\n        }\n      }\n    }).then(() => {\n      // 生成成功后刷新列表\n      this.refresh();\n      app.alerts.show({ type: 'success' }, '生成成功！');\n    });\n  }\n\n  content() {\n    return (\n      <div className=\"ExtensionPage-settings\">\n        <div className=\"container\">\n          <h2>兑换码管理</h2>\n          \n          {/* 生成区 */}\n          <div className=\"Form-group\" style=\"background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px;\">\n            <h3>生成新码</h3>\n            <div style=\"display: flex; gap: 10px; align-items: flex-end;\">\n                <div>\n                    <label>群组 ID</label>\n                    <input className=\"FormControl\" type=\"number\" value={this.newGroup} oninput={e => this.newGroup = e.target.value} />\n                </div>\n                <div>\n                    <label>天数</label>\n                    <input className=\"FormControl\" type=\"number\" value={this.newDays} oninput={e => this.newDays = e.target.value} />\n                </div>\n                <div>\n                    <label>数量</label>\n                    <input className=\"FormControl\" type=\"number\" value={this.newAmount} oninput={e => this.newAmount = e.target.value} />\n                </div>\n                <Button className=\"Button Button--primary\" onclick={this.generate.bind(this)} loading={this.loading}>\n                    开始生成\n                </Button>\n            </div>\n          </div>\n\n          {/* 列表区 */}\n          <table style=\"width: 100%; text-align: left; border-collapse: collapse;\">\n            <thead>\n                <tr style=\"border-bottom: 2px solid #ddd;\">\n                    <th style=\"padding: 10px;\">兑换码</th>\n                    <th style=\"padding: 10px;\">内容</th>\n                    <th style=\"padding: 10px;\">状态</th>\n                    <th style=\"padding: 10px;\">创建时间</th>\n                </tr>\n            </thead>\n            <tbody>\n                {this.codes.map(code => {\n                    const attr = code.attributes;\n                    const payload = JSON.parse(attr.payload);\n                    return (\n                        <tr style=\"border-bottom: 1px solid #eee;\">\n                            <td style=\"padding: 10px; font-family: monospace; font-weight: bold;\">{attr.code}</td>\n                            <td style=\"padding: 10px;\">群组 {payload.groupId} / {payload.days} 天</td>\n                            <td style=\"padding: 10px;\">\n                                {attr.isUsed ? \n                                    <span style=\"color: red;\">已使用</span> : \n                                    <span style=\"color: green;\">未使用</span>\n                                }\n                            </td>\n                            <td style=\"padding: 10px;\">{attr.createdAt.split('T')[0]}</td>\n                        </tr>\n                    );\n                })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    );\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","_setPrototypeOf","t","e","setPrototypeOf","bind","__proto__","flarum","core","compat","app","add","registerPage","RedemptionPage","_ExtensionPage","apply","arguments","create","constructor","_proto","oninit","vnode","this","codes","loading","newGroup","newDays","newAmount","refresh","_this","method","url","attribute","then","response","data","m","redraw","generate","_this2","body","attributes","groupId","days","amount","show","type","content","_this3","className","style","value","oninput","target","Button","onclick","map","code","attr","payload","JSON","parse","isUsed","createdAt","split","ExtensionPage"],"ignoreList":[],"sourceRoot":""}