(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};(()=>{"use strict";function e(t,n){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e(t,n)}const n=flarum.core.compat["admin/app"];var o=t.n(n);const r=flarum.core.compat["admin/components/ExtensionPage"];var a=t.n(r);const i=flarum.core.compat["common/components/Button"];var s=t.n(i);o().initializers.add("hertz-dev-redemption-code",function(){o().extensionData.for("hertz-dev-redemption-code").registerPage(l)});var l=function(t){function n(){return t.apply(this,arguments)||this}var r,a;a=t,(r=n).prototype=Object.create(a.prototype),r.prototype.constructor=r,e(r,a);var i=n.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.codes=[],this.loading=!1,this.newGroup=10,this.newDays=30,this.newAmount=1,this.refresh()},i.refresh=function(){var t=this;this.loading=!0,o().request({method:"GET",url:o().forum.attribute("apiUrl")+"/redemption-codes"}).then(function(e){t.codes=e.data,t.loading=!1,m.redraw()})},i.generate=function(){var t=this;this.loading=!0,o().request({method:"POST",url:o().forum.attribute("apiUrl")+"/redemption-codes",body:{data:{attributes:{groupId:this.newGroup,days:this.newDays,amount:this.newAmount}}}}).then(function(){t.refresh(),o().alerts.show({type:"success"},"生成成功！")})},i.content=function(){var t=this;return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},m("h2",null,"兑换码管理"),m("div",{className:"Form-group",style:"background: #f0f0f0; padding: 15px; border-radius: 5px; margin-bottom: 20px;"},m("h3",null,"生成新码"),m("div",{style:"display: flex; gap: 10px; align-items: flex-end;"},m("div",null,m("label",null,"群组 ID"),m("input",{className:"FormControl",type:"number",value:this.newGroup,oninput:function(e){return t.newGroup=e.target.value}})),m("div",null,m("label",null,"天数"),m("input",{className:"FormControl",type:"number",value:this.newDays,oninput:function(e){return t.newDays=e.target.value}})),m("div",null,m("label",null,"数量"),m("input",{className:"FormControl",type:"number",value:this.newAmount,oninput:function(e){return t.newAmount=e.target.value}})),m(s(),{className:"Button Button--primary",onclick:this.generate.bind(this),loading:this.loading},"开始生成"))),m("table",{style:"width: 100%; text-align: left; border-collapse: collapse;"},m("thead",null,m("tr",{style:"border-bottom: 2px solid #ddd;"},m("th",{style:"padding: 10px;"},"兑换码"),m("th",{style:"padding: 10px;"},"内容"),m("th",{style:"padding: 10px;"},"状态"),m("th",{style:"padding: 10px;"},"创建时间"))),m("tbody",null,this.codes.map(function(t){var e=t.attributes,n=JSON.parse(e.payload);return m("tr",{style:"border-bottom: 1px solid #eee;"},m("td",{style:"padding: 10px; font-family: monospace; font-weight: bold;"},e.code),m("td",{style:"padding: 10px;"},"群组 ",n.groupId," / ",n.days," 天"),m("td",{style:"padding: 10px;"},e.isUsed?m("span",{style:"color: red;"},"已使用"):m("span",{style:"color: green;"},"未使用")),m("td",{style:"padding: 10px;"},e.createdAt.split("T")[0]))})))))},n}(a())})(),module.exports={}})();
//# sourceMappingURL=admin.js.map